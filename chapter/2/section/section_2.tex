\section{Arquitectura limpia}\label{sec:clean_architecture}

En el ámbito del desarrollo de software, la arquitectura de un sistema es crucial para determinar su escalabilidad y
mantenibilidad a largo plazo.
Una de las metodologías que ha cobrado relevancia en este contexto son las ``arquitecturas limpias'', un enfoque para el
diseño de software promovido por Robert C. Martin en su libro Clean Architecture: A Craftsman`s Guide to Software
Structure and Design~\cite{book_martin_2017}.

La arquitectura limpia es un estilo de diseño que organiza el sistema de manera que sea independiente de los diferentes
elementos externos a los que considera detalles de implementación y que son intercambiables unos por otros como por
ejemplo: \textit{frameworks}, \textit{interfaces}, bases de datos o \textit{API} entre otros.

La esencia de esta arquitectura radica en su diagrama de capas, donde cada capa tiene una responsabilidad claramente
definida y depende solo de las capas más internas.
Esto se logra mediante el principio de inversión de dependencias, lo que significa que los detalles dependen de las
abstracciones y no al contrario.

Existen diferentes implementaciones de ``arquitectura limpia'', cada una con sus características intrínsecas, en este
proyecto hemos decidido implementar la versión en tres capas que aparece en la figura
~\ref{fig:chapter_2.clean_architecture}.

\begin{figure}[ht]
    \begin{center}
        \includegraphics[width=0.5\textwidth]{./chapter/2/images/chapter_2.clean_architecture}
        \caption{Esquema de una arquitectura limpia}
        \label{fig:chapter_2.clean_architecture}
    \end{center}
\end{figure}

La capa más interior se denomina \textbf{capa de dominio} y es el corazón del proyecto, encapsula la lógica y las
reglas.
Esta capa es fundamentalmente agnóstica respecto a tecnologías externas y se centra exclusivamente en definir los
conceptos fundamentales.
Algunos de los elementos que contiene son: entidades, objetos de valor, servicios de dominio, abstracciones

Esta capa debe ser autocontenida y fácilmente testable, aislada de tecnologías externas como bases de datos o
interfaces de usuario.

La capa que aparece a continuación es la \textbf{capa de aplicación}.
La capa de aplicación actúa como un mediador entre la capa exterior y la capa de dominio, coordinando las operaciones
de alto nivel que involucran múltiples aspectos del dominio.

La capa más exterior se denomina \textbf{capa de infraestructura}.
La capa de infraestructura proporciona las capacidades tecnológicas necesarias para que la capa de dominio puedan
realizar sus funciones sin tener que preocuparse por los detalles de implementación.
Toda la comunicación o interacción con elementos externos a la aplicación deben estar contenidos dentro de la capa de
infraestructura.

El uso de una arquitectura limpia en el desarrollo de este sistema asegura que cada componente en la capa de
infraestructura sea fácil de modificar o reemplazar.
Como veremos, esto permitirá una integración sencilla de nuevas tecnologías y, por lo tanto, la inclusión del soporte
de nuevos tipos de formato o nuevos tipos de documento en el sistema a futuro.